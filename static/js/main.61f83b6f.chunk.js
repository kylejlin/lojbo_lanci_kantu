(this.webpackJsonplojbo_lanci_kantu=this.webpackJsonplojbo_lanci_kantu||[]).push([[0],{15:function(e,t,y){},16:function(e,t,y){},17:function(e,t,y){"use strict";y.r(t);var n=y(0),i=y(1),p=y.n(i),a=y(5),r=y.n(a),s=(y(15),y(6)),x=y(7),c=y(2),o=y(9),d=y(8),l=(y(16),y(4));function u(e,t){var y=t-e;return e+Math.random()*y}function h(e){return u(-e,e)}function v(e,t){return u(e-t,e+t)}function f(e){return Math.random()<e}function m(e){switch(e.type){case 0:return j(e.x,e.y);case 1:return b(e.x,e.y)}}function j(e,t){var y=e,n=t;return{emit:function(){for(var e=[],t=10;--t;)if(f(.55)){var i=h(1.9),p=h(1.9),a=-u(0,.05),r=-u(0,.05);e.push({x:y,y:n,vx:3*i,vy:3*p,ax:a*i,ay:r*p,radius:30,vRadius:3*v(.25,.25),r:120,g:120,b:200,a:~~u(180,200),vr:1,vg:3,vb:8,va:-u(7,10)})}return e},spec:{type:0,x:y,y:n}}}function b(e,t){var y=e,n=t;return{emit:function(){for(var e=[],t=10;--t;)if(f(.55)){var i=h(1.9),p=h(1.9),a=-u(0,.05),r=-u(0,.05);e.push({x:y,y:n,vx:3*i,vy:3*p,ax:a*i,ay:r*p,radius:24,vRadius:3*v(.25,.5),r:270,g:120,b:120,a:.6*~~u(180,200),vr:4,vg:-1,vb:-1,va:-u(7,10)})}return e},spec:{type:1,x:y,y:n}}}var g=[{type:1,x:4584,y:1210},{type:1,x:4652,y:1170},{type:1,x:4700,y:1130},{type:1,x:4780,y:1050},{type:1,x:4844,y:970},{type:1,x:4900,y:910},{type:1,x:4900,y:986},{type:1,x:4932,y:1046},{type:1,x:4936,y:1106},{type:1,x:4944,y:1186},{type:1,x:4948,y:1258},{type:1,x:4936,y:1318},{type:1,x:4896,y:1366},{type:1,x:4852,y:1422},{type:1,x:4776,y:1458},{type:1,x:4700,y:1454},{type:1,x:4616,y:1446},{type:1,x:4520,y:1410},{type:1,x:4456,y:1366},{type:1,x:4396,y:1306},{type:1,x:4560,y:1282},{type:1,x:4616,y:1282},{type:1,x:4708,y:1270},{type:1,x:4792,y:1258},{type:1,x:4888,y:1242},{type:1,x:5024,y:1214},{type:1,x:5132,y:1194},{type:1,x:5224,y:1162},{type:1,x:5304,y:1130},{type:1,x:5376,y:1118},{type:1,x:5456,y:1086},{type:1,x:5560,y:1050},{type:1,x:5680,y:1038},{type:1,x:5768,y:1026},{type:1,x:5552,y:1138},{type:1,x:5500,y:1214},{type:1,x:5440,y:1306},{type:1,x:5416,y:1398},{type:1,x:5484,y:1434},{type:1,x:5608,y:1414},{type:1,x:5688,y:1342},{type:1,x:5776,y:1258},{type:1,x:5844,y:1178},{type:1,x:5892,y:1078},{type:1,x:5896,y:1030},{type:1,x:5896,y:1194},{type:1,x:5888,y:1278},{type:1,x:5880,y:1366},{type:1,x:5872,y:1438},{type:1,x:5928,y:1466},{type:1,x:6008,y:1482},{type:1,x:6108,y:1450},{type:1,x:6164,y:1378},{type:1,x:6236,y:1302},{type:1,x:6288,y:1206},{type:1,x:6304,y:1094},{type:1,x:6340,y:1198},{type:1,x:6288,y:1286},{type:1,x:6300,y:1378},{type:1,x:6304,y:1426},{type:1,x:6332,y:1482},{type:1,x:6368,y:1506},{type:1,x:6464,y:1498},{type:1,x:6292,y:858},{type:1,x:6344,y:838},{type:1,x:6280,y:762},{type:1,x:4496,y:1270},{type:1,x:4300,y:1298},{type:1,x:4184,y:1310},{type:1,x:4100,y:1322},{type:0,x:4016,y:1336},{type:0,x:3932,y:1364},{type:0,x:3856,y:1376},{type:0,x:3768,y:1380},{type:0,x:3692,y:1292},{type:0,x:3728,y:1324},{type:0,x:3656,y:1152},{type:0,x:3672,y:1212},{type:0,x:3668,y:1032},{type:0,x:3676,y:940},{type:0,x:3700,y:860},{type:0,x:3624,y:848},{type:0,x:3524,y:864},{type:0,x:3420,y:884},{type:0,x:3336,y:916},{type:0,x:3244,y:968},{type:0,x:3176,y:1020},{type:0,x:3132,y:1096},{type:0,x:3092,y:1160},{type:0,x:3068,y:1232},{type:0,x:3040,y:1304},{type:0,x:3056,y:1368},{type:0,x:3124,y:1416},{type:0,x:3216,y:1380},{type:0,x:3300,y:1352},{type:0,x:3384,y:1324},{type:0,x:3456,y:1300},{type:0,x:3528,y:1260},{type:0,x:3592,y:1232},{type:0,x:2132,y:1080},{type:0,x:2172,y:996},{type:0,x:2244,y:924},{type:0,x:2320,y:872},{type:0,x:2428,y:852},{type:0,x:2516,y:848},{type:0,x:2596,y:888},{type:0,x:2664,y:952},{type:0,x:2696,y:1016},{type:0,x:2728,y:1116},{type:0,x:2712,y:1200},{type:0,x:2712,y:1288},{type:0,x:2648,y:1340},{type:0,x:2388,y:1436},{type:0,x:2464,y:1408},{type:0,x:2564,y:1388},{type:0,x:2280,y:1396},{type:0,x:2200,y:1332},{type:0,x:2156,y:1236},{type:0,x:2120,y:1140},{type:0,x:2364,y:932},{type:0,x:2448,y:952},{type:0,x:2572,y:976},{type:0,x:2728,y:916},{type:0,x:2864,y:892},{type:0,x:2960,y:876},{type:0,x:3072,y:864},{type:0,x:3200,y:852},{type:0,x:3312,y:832},{type:0,x:1604,y:1412},{type:0,x:1660,y:1392},{type:0,x:1736,y:1348},{type:0,x:1796,y:1312},{type:0,x:1856,y:1276},{type:0,x:1924,y:1224},{type:0,x:1980,y:1164},{type:0,x:2044,y:1096},{type:0,x:2096,y:1036},{type:0,x:2756,y:344},{type:0,x:2776,y:408},{type:0,x:2784,y:500},{type:0,x:2788,y:564}],w=[{type:0,x:286,y:390},{type:0,x:312,y:320},{type:0,x:382,y:274},{type:0,x:442,y:248},{type:0,x:508,y:252},{type:0,x:566,y:278},{type:0,x:602,y:316},{type:0,x:644,y:354},{type:0,x:652,y:406},{type:0,x:646,y:456},{type:0,x:620,y:512},{type:0,x:586,y:556},{type:0,x:540,y:594},{type:0,x:484,y:604},{type:0,x:420,y:590},{type:0,x:360,y:558},{type:0,x:280,y:446},{type:0,x:298,y:504},{type:0,x:486,y:390},{type:0,x:512,y:320},{type:0,x:582,y:274},{type:0,x:642,y:248},{type:0,x:708,y:252},{type:0,x:766,y:278},{type:0,x:802,y:316},{type:0,x:844,y:354},{type:0,x:852,y:406},{type:0,x:846,y:456},{type:0,x:820,y:512},{type:0,x:786,y:556},{type:0,x:740,y:594},{type:0,x:684,y:604},{type:0,x:620,y:590},{type:0,x:560,y:558},{type:0,x:480,y:446},{type:0,x:498,y:504},{type:1,x:200,y:399},{type:1,x:244,y:399},{type:1,x:305,y:401},{type:1,x:349,y:405},{type:1,x:406,y:401},{type:1,x:474,y:404},{type:1,x:529,y:407},{type:1,x:583,y:408},{type:1,x:649,y:411},{type:1,x:695,y:416},{type:1,x:729,y:408},{type:1,x:787,y:422},{type:1,x:838,y:421},{type:1,x:902,y:421},{type:1,x:939,y:417},{type:1,x:562,y:166},{type:1,x:562,y:202},{type:1,x:573,y:240},{type:1,x:576,y:278},{type:1,x:572,y:317},{type:1,x:573,y:358},{type:1,x:573,y:380},{type:1,x:569,y:438},{type:1,x:572,y:471},{type:1,x:567,y:510},{type:1,x:571,y:541},{type:1,x:572,y:566},{type:1,x:570,y:597},{type:1,x:571,y:623},{type:1,x:568,y:648},{type:1,x:567,y:677},{type:1,x:974,y:419},{type:1,x:1006,y:420},{type:1,x:987,y:381},{type:1,x:963,y:360},{type:1,x:996,y:441},{type:1,x:969,y:461},{type:1,x:567,y:701},{type:1,x:602,y:686},{type:1,x:628,y:672},{type:1,x:536,y:681},{type:1,x:514,y:664},{type:1,x:569,y:133},{type:1,x:593,y:140},{type:1,x:615,y:160},{type:1,x:538,y:142},{type:1,x:518,y:158},{type:1,x:166,y:395},{type:1,x:180,y:363},{type:1,x:202,y:341},{type:1,x:180,y:427},{type:1,x:199,y:451},{type:0,x:341,y:294},{type:1,x:439,y:401},{type:1,x:864,y:413},{type:1,x:281,y:394},{type:1,x:499,y:402},{type:1,x:671,y:412},{type:1,x:618,y:404},{type:1,x:655,y:394},{type:1,x:551,y:404},{type:1,x:484,y:386},{type:1,x:755,y:412},{type:1,x:810,y:418},{type:1,x:379,y:401},{type:1,x:566,y:277},{type:1,x:571,y:259},{type:1,x:561,y:553},{type:1,x:587,y:554},{type:1,x:851,y:410}].map((function(e){return{type:e.type,x:3*e.x-300,y:3*e.y-250}}));function k(e,t){var y=2*Math.PI,n=e.width,i=e.height,p=e.getContext("2d"),a=t.map(m),r=[],s=!1,x=!0;function c(){s||(x&&function(){for(var e=a.length,t=0;t<e;++t){var y=a[t].emit();r.push.apply(r,Object(l.a)(y))}}(),function(){for(var e=r.length,t=0;t<e;++t){var y=r[t];y.a+=y.va,y.a<=0?(r.splice(t,1),--t,--e):(y.x+=y.vx,y.y+=y.vy,y.vx+=y.ax,y.vy+=y.ay,y.radius+=y.vRadius,y.r+=y.vr,y.g+=y.vg,y.b+=y.vb)}}(),p.clearRect(0,0,n,i),function(){for(var e=r.length,t=0;t<e;++t){var n=r[t];p.fillStyle=E(n),p.beginPath(),p.arc(n.x,n.y,n.radius,0,y),p.closePath(),p.fill()}}()),requestAnimationFrame(c)}return window.addEventListener("keydown",(function(e){" "===e.key&&(s=!1)})),window.addEventListener("keyup",(function(e){" "===e.key&&(s=!0)})),window.addEventListener("keypress",(function(e){"p"===e.key&&(x=!x)})),c(),function(){return{pushEmitter:function(e,t,y){switch(e){case 0:a.push(j(t,y));break;case 1:a.push(b(t,y));break;default:throw new TypeError("Unknown emitter type: "+e)}},popEmitter:function(){a.pop()},loadPreset:function(t){var y;switch(t){case"lojbo_lanci":y=w;break;case"ohasai":y=g}return e(y),y},invertEmitterTypes:function(){for(var e=a.length,y=0;y<e;++y){var n=a[y],i=m({type:t(n.spec.type),x:n.spec.x,y:n.spec.y});a[y]=i}},getEmitterSpecs:function(){return a.map((function(e){return e.spec}))}};function e(e){var t=e.map(m);a.splice.apply(a,[0,a.length].concat(Object(l.a)(t)))}function t(e){switch(e){case 0:return 1;case 1:return 0}}}()}function E(e){return"rgba("+e.r+","+e.g+","+e.b+","+e.a/255+")"}var O="LojboLanciKantu.Particle.EmitterCoordinates",T="LojboLanciKantu.CreateEmitter.EmitterType";function S(e){localStorage.setItem(O,JSON.stringify(e))}function P(){var e=localStorage.getItem(O);return null===e?void 0:JSON.parse(e)}function L(e){localStorage.setItem(T,JSON.stringify(e))}function C(){var e=localStorage.getItem(T);if(null!==e){var t=parseInt(e,10);return 0===t||1===t?t:void 0}}var N=function(e){Object(o.a)(y,e);var t=Object(d.a)(y);function y(e){var n,i,a;return Object(s.a)(this,y),(a=t.call(this,e)).canvasRef=void 0,window.app=Object(c.a)(a),a.state={emitterType:null!==(n=C())&&void 0!==n?n:0,addedEmitters:null!==(i=P())&&void 0!==i?i:w,shouldAddEmitter:!1,sceneModifier:void 0},a.canvasRef=p.a.createRef(),a.bindMethods(),a}return Object(x.a)(y,[{key:"bindMethods",value:function(){this.onCanvasClick=this.onCanvasClick.bind(this)}},{key:"componentDidMount",value:function(){this.addEventListeners(),this.startAnimationLoop()}},{key:"startAnimationLoop",value:function(){var e=this.canvasRef.current;if(null===e)throw new Error("Cannot find canvas.");var t=k(e,this.state.addedEmitters);this.setState({sceneModifier:t})}},{key:"addEventListeners",value:function(){var e=this;window.addEventListener("keydown",(function(t){"e"===t.key?e.setState({shouldAddEmitter:!0}):"1"===t.key?e.loadPreset("lojbo_lanci"):"2"===t.key?e.loadPreset("ohasai"):"["===t.key?e.decreaseEmitterType():"]"===t.key&&e.increaseEmitterType()})),window.addEventListener("keyup",(function(t){"e"===t.key&&e.setState({shouldAddEmitter:!1})})),window.addEventListener("keypress",(function(t){if("r"===t.key)e.removeEmitter();else if("t"===t.key){var y=e.state.sceneModifier;if(void 0!==y){y.invertEmitterTypes();var n=y.getEmitterSpecs();e.setState({addedEmitters:n}),S(n)}}}))}},{key:"loadPreset",value:function(e){var t,y=null===(t=this.state.sceneModifier)||void 0===t?void 0:t.loadPreset(e);void 0!==y&&(this.setState({addedEmitters:y}),S(y))}},{key:"decreaseEmitterType",value:function(){var e=0===this.state.emitterType?1:this.state.emitterType-1;this.setState({emitterType:e}),L(e)}},{key:"increaseEmitterType",value:function(){var e=1===this.state.emitterType?0:this.state.emitterType+1;this.setState({emitterType:e}),L(e)}},{key:"removeEmitter",value:function(){var e=this;this.state.addedEmitters.length>0?this.setState((function(e){var t=e.addedEmitters.slice(0,-1);return S(t),{addedEmitters:t}}),(function(){var t;null===(t=e.state.sceneModifier)||void 0===t||t.popEmitter()})):alert("No user-added emitters to remove.")}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("section",{children:[Object(n.jsx)("h1",{children:"Lojbanic Flag Particle Playground"}),Object(n.jsx)("p",{children:"Scroll down for instructions."}),Object(n.jsx)("p",{children:"Warning: This can be a CPU-intensive web app, so for best results, I don't recommend using it on an old computer."})]}),Object(n.jsx)("canvas",{ref:this.canvasRef,width:7e3,height:2e3,style:{width:1750,height:500},onClick:this.onCanvasClick}),Object(n.jsxs)("section",{children:[Object(n.jsx)("h2",{children:"Instructions"}),Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"1"})," to load the Lojbanic flag preset. This will overwrite all existing work."]}),Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"2"}),' to load the "o\'asai" preset. This will overwrite all existing work.']}),Object(n.jsxs)("li",{children:["Hold ",Object(n.jsx)("span",{className:"Key",children:"E"})," and click to add a particle emitter."]}),Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"R"})," to remove the most recently added particle emitter."]}),Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"["})," to switch the particle emitter type. This will only take effect starting with the next added emitter."]}),Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"Space"})," to pause the animation.",Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["Once paused, the animation can be resumed by holding down",Object(n.jsx)("span",{className:"Key",children:"Space"}),"."]}),Object(n.jsxs)("li",{children:["The animation will resume while"," ",Object(n.jsx)("span",{className:"Key",children:"Space"})," is held down."]})]})]}),Object(n.jsxs)("li",{children:["Press ",Object(n.jsx)("span",{className:"Key",children:"T"})," to invert particle emitter types."]}),Object(n.jsxs)("li",{children:['To download an image of what you see on the screen, right click and then click "Save Image As", just as you would download an ordinary image.',Object(n.jsx)("ul",{children:Object(n.jsx)("li",{children:"If you download the image as a PNG, the background of the downloaded image will be transparent."})})]})]})]}),Object(n.jsx)("footer",{children:Object(n.jsxs)("p",{children:["This web app was created by"," ",Object(n.jsx)("a",{href:"https://github.com/kylejlin",children:"Kyle Lin"}),". The source can be found under the MIT license"," ",Object(n.jsx)("a",{href:"https://github.com/kylejlin/lojbo_lanci_kantu",children:"here"}),"."]})})]})}},{key:"onCanvasClick",value:function(e){var t=this,y=e.clientX,n=e.clientY;if(e.altKey)this.setState((function(e){return{addedEmitters:e.addedEmitters.slice(0,-1)}}),(function(){console.log("after removal",t.state.addedEmitters),window.alert("Removed previous point.")}));else{var i=e.target,p=i.getBoundingClientRect(),a=(y-p.left)*i.width/p.width,r=(n-p.top)*i.height/p.height;this.addEmitterIfNeeded(a,r)}}},{key:"addEmitterIfNeeded",value:function(e,t){var y=this,n=this.state.emitterType;this.state.shouldAddEmitter&&this.setState((function(y){var i=y.addedEmitters.concat([{type:n,x:e,y:t}]);return S(i),{addedEmitters:i}}),(function(){var i;console.log("Latest emitter coordinates: ",y.state.addedEmitters),null===(i=y.state.sceneModifier)||void 0===i||i.pushEmitter(n,e,t)}))}}]),y}(p.a.Component);var I=function(e){e&&e instanceof Function&&y.e(3).then(y.bind(null,18)).then((function(t){var y=t.getCLS,n=t.getFID,i=t.getFCP,p=t.getLCP,a=t.getTTFB;y(e),n(e),i(e),p(e),a(e)}))};r.a.render(Object(n.jsx)(p.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),I()}},[[17,1,2]]]);
//# sourceMappingURL=main.61f83b6f.chunk.js.map